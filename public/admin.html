<!doctype html>
<html>
<head>
  <title>Admin Dashboard</title>
  <link rel="stylesheet" href="/css/base.css" />
  <style>
    .item-block {
      border: 1px solid #ccc;
      border-radius: 6px;
      padding: 8px;
      margin-bottom: 10px;
    }
    .item-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .btn {
      margin-left: 6px;
    }
  </style>
</head>
<body>
<div class="container">
  <h1>Admin Dashboard</h1>
  <div id="lostList"></div>
</div>

<script type="module">
const lostListDiv = document.getElementById("lostList");

// Load lost items
async function loadLostItems() {
  const res = await fetch("/api/admin/items");
  const data = await res.json();
  const lost = data.lost || [];

  if (!lost.length) {
    lostListDiv.innerHTML = "<div>No lost items.</div>";
    return;
  }

  lostListDiv.innerHTML = lost.map(item => `
    <div class="item-block" data-id="${item._id || item.id}">
      <div class="item-row">
        <div>
          <strong>${item.title || item.name}</strong> • ${item.location || "N/A"} • ${item.date || "N/A"}
        </div>
        <div>
          <button class="btn deleteBtn">Delete</button>
        </div>
      </div>
      <div>${item.description || ""}</div>
    </div>
  `).join("");

  // Add delete button functionality
  lostListDiv.querySelectorAll(".deleteBtn").forEach(btn => {
    btn.addEventListener("click", async e => {
      const id = e.target.closest(".item-block").dataset.id;
      const ok = await fetch(`/api/lost-items/${id}`, { method: "DELETE" })
        .then(r => r.ok)
        .catch(() => false);

      if (ok) {
        loadLostItems(); // refresh list
      } else {
        alert("Delete failed");
      }
    });
  });
}

// Initial load
loadLostItems();
</script>
</body>
</html>

<!-- <!doctype html>
<html>
<head>
  <title>Admin</title>
  <link rel="stylesheet" href="/css/base.css" />
</head>
<body>
<div class="container">
  <h1>Admin Dashboard</h1>
  <div id="content"></div>
</div>

<script type="module">
const res = await fetch("/api/admin/items");
const data = await res.json();

document.getElementById("content").innerHTML = `
<h2>Lost Items</h2>
<pre>${JSON.stringify(data.lost, null, 2)}</pre>

<h2>Found Items</h2>
<pre>${JSON.stringify(data.found, null, 2)}</pre>
`;
</script>
</body>
</html> -->
